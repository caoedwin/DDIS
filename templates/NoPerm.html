{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}lesson_form_upload{% endblock %}
{% block css %}
    {#    <link rel="stylesheet" href="/static/css/index.css">#}
    <style>
        tbody tr td:last-child {
            text-align: left;
        }

        .selectMsg {
            font-size: 16px;
            padding: 15px;
            display: flex;
            flex-wrap: wrap;
        }

        .selectMsg label {
            font-weight: 800;
            margin-right: 10px;
            color: aliceblue;
        }

        .selectItem {
            font-size: 20px;
            font-weight: bold;
            color: aliceblue;
        }

        .tableAround {
            padding: 20px;
            -moz-box-shadow: 0px 0px 10px #333333;
            -webkit-box-shadow: 0px 0px 10px #333333;
            box-shadow: 0px 0px 10px #333333;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.1);
        }

        .el-collapse-item__header {
            background-image: linear-gradient(to right, rgba(0, 139, 139, 0), rgba(0, 139, 139, 1));
        }

    </style>

{% endblock %}
{% block content1 %}
{% endblock %}
{% block content %}
    <div id="app" {% comment %}v-pre{% endcomment %}>
        <div style="color: #0c0c0c">
            <span style="color: red;font-size: 30px;white-space: pre-line">{{ message }}</span>
            {#            {% for i in messageurl %}#}
            {#                <div>#}
            {#                <a class="" href="{{ i }}" {% comment %}target="_blank"{% endcomment %}><span style="color: white;font-size: 20px;white-space: pre-line">{{ i }}</span></a>#}
            {#                </div>#}
            {#            {% endfor %}#}

        </div>
        <el-backtop></el-backtop>

        <div class="tableAround" style="white-space: nowrap;">
            <el-collapse v-model="activeNames" @change="handleChange">
                <span style="color: #FFFFFF">權限信息：</span>
                <el-collapse-item title="C38" name="1">
                    <div style="width: 100%;">
                        <template v-cloak>
                            <el-image
                                    style="width: 100%;"
                                    src="/static/src/PerC38.jpg"></el-image>
                            {% comment %}<el-table border :data="tableContent_C38" id="out-table1"
                                      :span-method="daLeiSpanMethodC38"
                                      v-loading="tableloading"
                                      :header-cell-style="{color:'#333',fontFamily:'MicrosoftYaHeiUI',fontSize:'12px',fontWeight:900,background:'#CCDDFF','border-bottom':'1px solid rgb(103, 194, 58)'}"
                                      style="min-width: 100%;border-radius: 10px;font-size: 10px;float: left"
                                      element-loading-text="數據更新中，請稍後"
                            >
                                <el-table-column prop="Category" label="分类" align="left" width="auto" min-width="8%">
                                </el-table-column>
                                <el-table-column prop="System" label="System" align="left" width="auto"
                                                 min-width="7%"></el-table-column>

                                <el-table-column prop="RoleName" label="權限名稱" align="left" width="auto" min-width="15%">

                                </el-table-column>
                                <el-table-column prop="DQA_All" label="DQA_All" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="SW_Manager" label="SW_Manager" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="ME_Manager" label="ME_Manager" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="DQA_QM" label="DQA_QM" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="DQA_AQM" label="DQA_AQM" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="RD_DD" label="RD_DD" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="RD_LD" label="RD_LD" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="RD_MEFG" label="RD_MEFG" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="RD_SW_Search" label="RD_SW_Search" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                            </el-table>{% endcomment %}
                        </template>
                    </div>
                </el-collapse-item>
                <el-collapse-item title="ABO" name="2">
                    <div style="width: 100%;">
                        <template v-cloak>
                            <el-image
                                    style="width: 100%;"
                                    src="/static/src/PerABO.jpg"></el-image>
                            {% comment %}<el-table border :data="tableContent_ABO" id="out-table2"
                                      v-loading="tableloading"
                                      :header-cell-style="{color:'#333',fontFamily:'MicrosoftYaHeiUI',fontSize:'12px',fontWeight:900,background:'#CCDDFF','border-bottom':'1px solid rgb(103, 194, 58)'}"
                                      style="min-width: 100%;border-radius: 10px;font-size: 10px;float: left"
                                      element-loading-text="數據更新中，請稍後"
                            >
                                <el-table-column prop="Category" label="分类" align="left" width="auto" min-width="8%">
                                </el-table-column>
                                <el-table-column prop="System" label="System" align="left" width="auto"
                                                 min-width="7%"></el-table-column>

                                <el-table-column prop="RoleName" label="權限名稱" align="left" width="auto" min-width="15%">

                                </el-table-column>
                                <el-table-column prop="DQA_All" label="DQA_All" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="PL" label="PL" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                            </el-table>{% endcomment %}
                        </template>
                    </div>
                </el-collapse-item>
                <el-collapse-item title="CQT88" name="3">
                    <div style="width: 100%;">
                        <template v-cloak>
                            <el-image
                                    style="width: 100%;"
                                    src="/static/src/PerCQT88.jpg"></el-image>
                            {% comment %}<el-table border :data="tableContent_CQT88" id="out-table3"
                                      v-loading="tableloading"
                                      :header-cell-style="{color:'#333',fontFamily:'MicrosoftYaHeiUI',fontSize:'12px',fontWeight:900,background:'#CCDDFF','border-bottom':'1px solid rgb(103, 194, 58)'}"
                                      style="min-width: 100%;border-radius: 10px;font-size: 10px;float: left"
                                      element-loading-text="數據更新中，請稍後"
                            >
                                <el-table-column prop="Category" label="分类" align="left" width="auto" min-width="8%">
                                </el-table-column>
                                <el-table-column prop="System" label="System" align="left" width="auto"
                                                 min-width="7%"></el-table-column>

                                <el-table-column prop="RoleName" label="權限名稱" align="left" width="auto" min-width="15%">

                                </el-table-column>
                                <el-table-column prop="DQA_All" label="DQA_All" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="PL" label="PL" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                            </el-table>{% endcomment %}
                        </template>
                    </div>
                </el-collapse-item>
                <el-collapse-item title="A31" name="4">
                    <div style="width: 100%;">
                        <template v-cloak>
                            <el-image
                                    style="width: 100%;"
                                    src="/static/src/PerA31.jpg"></el-image>
                            {% comment %}<el-table border :data="tableContent_A31" id="out-table4"
                                      v-loading="tableloading"
                                      :header-cell-style="{color:'#333',fontFamily:'MicrosoftYaHeiUI',fontSize:'12px',fontWeight:900,background:'#CCDDFF','border-bottom':'1px solid rgb(103, 194, 58)'}"
                                      style="min-width: 100%;border-radius: 10px;font-size: 10px;float: left"
                                      element-loading-text="數據更新中，請稍後"
                            >
                                <el-table-column prop="Category" label="分类" align="left" width="auto" min-width="8%">
                                </el-table-column>
                                <el-table-column prop="System" label="System" align="left" width="auto"
                                                 min-width="7%"></el-table-column>

                                <el-table-column prop="RoleName" label="權限名稱" align="left" width="auto" min-width="15%">

                                </el-table-column>
                                <el-table-column prop="DQA_All" label="DQA_All" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="PL" label="PL" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                            </el-table>{% endcomment %}
                        </template>
                    </div>
                </el-collapse-item>
                <el-collapse-item title="A32" name="5">
                    <div style="width: 100%;">
                        <template v-cloak>
                            <el-image
                                    style="width: 100%;"
                                    src="/static/src/PerA32.jpg"></el-image>
                            {% comment %}<el-table border :data="tableContent_A32" id="out-table5"
                                      v-loading="tableloading"
                                      :header-cell-style="{color:'#333',fontFamily:'MicrosoftYaHeiUI',fontSize:'12px',fontWeight:900,background:'#CCDDFF','border-bottom':'1px solid rgb(103, 194, 58)'}"
                                      style="min-width: 100%;border-radius: 10px;font-size: 10px;float: left"
                                      element-loading-text="數據更新中，請稍後"
                            >
                                <el-table-column prop="Category" label="分类" align="left" width="auto" min-width="8%">
                                </el-table-column>
                                <el-table-column prop="System" label="System" align="left" width="auto"
                                                 min-width="7%"></el-table-column>

                                <el-table-column prop="RoleName" label="權限名稱" align="left" width="auto" min-width="15%">

                                </el-table-column>
                                <el-table-column prop="DQA_All" label="DQA_All" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                                <el-table-column prop="PL" label="PL" align="left" width="auto"
                                                 min-width="6%"></el-table-column>
                            </el-table>{% endcomment %}
                        </template>
                    </div>
                </el-collapse-item>

            </el-collapse>
        </div>
        {% comment %}<div class="showDataArea" style="white-space: nowrap;background-color: white">
            <div class="Quatity" id="main3" style="height:450px;"></div>
        </div>{% endcomment %}
    </div>
{% endblock %}
{% block scripts %}


    <script src="/static/js/lib/calendar-2/moment.latest.min.js"></script>
    <!-- scripit init-->
    <script src="/static/js/lib/calendar-2/semantic.ui.min.js"></script>
    <!-- scripit init-->
    <script src="/static/js/lib/calendar-2/prism.min.js"></script>
    <!-- scripit init-->
    <script src="/static/js/lib/calendar-2/pignose.calendar.min.js"></script>
    <!-- scripit init-->
    <script src="/static/js/lib/calendar-2/pignose.init.js"></script>
    <!-- scripit init-->
    <script src="/static/js/lib/bootstrap.min.js"></script>
    <script src="/static/js/scripts.js"></script>
    <script src="/static/js/es6/polyfill.min.js"></script>
    <script src="/static/js/es6/babel.min.js"></script>
    <script src="/static/js/axios.min.js"></script>
    <script src="/static/js/vue.min.js"></script>
    <script src="/static/js/qs.js"></script>
    <script src="/static/js/Element/table.js"></script>
    <script src="/static/js/Element/main.js"></script>
    <script src="/static/js/Element/input.js"></script>
    <script src="/static/js/Element/table-column.js"></script>
    <script src="/static/js/Element/icon.js"></script>
    <script src="/static/js/Element/index.js"></script>
    <script src="/static/js/Element/image.js"></script>
    <script src="/static/js/Element/message.js"></script>
    {#<script src="/static/js/vue-router.min.js"></script>#}
    {% comment %}<script src="/static/js/vue-router.js"></script>{% endcomment %}
    <script type="text/babel">
        new Vue({
            el: "#app",
            delimiters: ['${', '}'],
            data() {
                return {
                    activeNames: ['1', '2', '3', '4', '5'],
                    tableloading: false,
                    tableContent_C38: [],
                    tableContent_ABO: [],
                    tableContent_CQT88: [],
                    tableContent_A31: [],
                    tableContent_A32: [],
                    heBingNum_C38: [],
                    heBingNum_ABO: [],
                    heBingNum_CQT88: [],
                    heBingNum_A31: [],
                    heBingNum_A32: [],
                }
            },
            mounted() {
                console.log(this.Sysname);
                this.getdata("first")
            },
            methods: {
                handleChange(val) {               //折疊面板變化
                    console.log(val);
                },
                getdata: function (e) {
                    this.tableloading = true;
                    let data = {
                        "isGetData": e,
                        'Sysname': this.Sysname,
                        "csrfmiddlewaretoken": $("[name='csrfmiddlewaretoken']").val()
                    };
                    axios.post("/PermInfo/", Qs.stringify(data), {
                        headers: {'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'}
                    }).then((res) => {
                        this.tableloading = false;
                        this.tableContent_C38 = res.data.tableContent_C38;
                        this.tableContent_ABO = res.data.tableContent_ABO;
                        this.tableContent_CQT88 = res.data.tableContent_CQT88;
                        this.tableContent_A31 = res.data.tableContent_A31;
                        this.tableContent_A32 = res.data.tableContent_A32;
                        this.heBingNum_C38 = res.data.heBingNum_C38;
                        this.heBingNum_ABO = res.data.heBingNum_ABO;
                        this.heBingNum_CQT88 = res.data.heBingNum_CQT88;
                        this.heBingNum_A31 = res.data.heBingNum_A31;
                        this.heBingNum_A32 = res.data.heBingNum_A32;
                    });
                },
                daLeiSpanMethodC38({row, column, rowIndex, columnIndex}) {
                    if (columnIndex === 0) {    //用于设置要合并的列
                        if (rowIndex === 0) {   //用于设置合并开始的行号
                            return {
                                rowspan: this.heBingNum_C38[0],　　　　　//合并的行数
                                colspan: 1          //合并的列数，设为０则直接不显示
                            };
                        } else if (rowIndex === this.heBingNum_C38[0]) {   //用于设置合并开始的行号
                            return {
                                rowspan: this.heBingNum_C38[1],　　　　　//合并的行
                                colspan: 1          //合并的列数，设为０则直接不显示
                            };
                        } else if (rowIndex === this.heBingNum_C38[0] + this.heBingNum_C38[1]) {   //用于设置合并开始的行号
                            return {
                                rowspan: this.heBingNum_C38[2],　　　　　//合并的行
                                colspan: 1          //合并的列数，设为０则直接不显示
                            };
                        } else if (rowIndex === this.heBingNum_C38[0] + this.heBingNum_C38[1] + this.heBingNum_C38[2]) {   //用于设置合并开始的行号
                            return {
                                rowspan: this.heBingNum_C38[3],　　　　　//合并的行
                                colspan: 1          //合并的列数，设为０则直接不显示
                            };
                        } else if (rowIndex === this.heBingNum_C38[0] + this.heBingNum_C38[1] + this.heBingNum_C38[2] + this.heBingNum_C38[3]) {   //用于设置合并开始的行号
                            return {
                                rowspan: this.heBingNum_C38[4],　　　　　//合并的行
                                colspan: 1          //合并的列数，设为０则直接不显示
                            };
                        } else if (rowIndex === this.heBingNum_C38[0] + this.heBingNum_C38[1] + this.heBingNum_C38[2] + this.heBingNum_C38[3] + this.heBingNum_C38[4]) {   //用于设置合并开始的行号
                            return {
                                rowspan: this.heBingNum_C38[5],　　　　　//合并的行
                                colspan: 1          //合并的列数，设为０则直接不显示
                            };
                        } else if (rowIndex === this.heBingNum_C38[0] + this.heBingNum_C38[1] + this.heBingNum_C38[2] + this.heBingNum_C38[3] + this.heBingNum_C38[4] + this.heBingNum_C38[5]) {   //用于设置合并开始的行号
                            return {
                                rowspan: this.heBingNum_C38[6],　　　　　//合并的行
                                colspan: 1          //合并的列数，设为０则直接不显示
                            };
                        }
                        else {
                            return {
                                rowspan: 0,
                                colspan: 0
                            };
                        }
                    }
                },
            }
        })
    </script>
{% endblock %}